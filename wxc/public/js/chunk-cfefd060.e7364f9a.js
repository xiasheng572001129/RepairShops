(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cfefd060"],{"020f":function(e,t,s){},"2da9":function(e,t,s){"use strict";s.r(t);var c=function(){var e=this,t=e.$createElement,c=e._self._c||t;return c("div",{staticClass:"upload"},[c("currentPage",{attrs:{id:187}}),c("h2",[e._v("产品上传")]),c("div",{staticClass:"content"},[c("div",{staticClass:"name"},[e._v("\n      产品名称：\n      "),c("div",{staticClass:"input"},[c("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.product.name,callback:function(t){e.$set(e.product,"name",t)},expression:"product.name"}})],1)]),c("div",{staticClass:"name"},[e._v("\n      产品种类：\n      "),c("div",{staticClass:"input"},[c("el-select",{attrs:{placeholder:"请选择"},model:{value:e.product.type,callback:function(t){e.$set(e.product,"type",t)},expression:"product.type"}},e._l(e.typeOptions,function(e){return c("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),0===e.product.type?c("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectNum,callback:function(t){e.selectNum=t},expression:"selectNum"}},e._l(e.specNumOptions,function(e){return c("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})):e._e()],1)]),c("div",{staticClass:"type"},[c("div",{staticClass:"input",staticStyle:{"margin-bottom":"10px"}},[0!==e.product.type||0!==e.selectNum&&1!=e.selectNum?e._e():c("el-select",{attrs:{placeholder:"请选择规格种类"},on:{change:e.spec1Current},model:{value:e.selectSpec1,callback:function(t){e.selectSpec1=t},expression:"selectSpec1"}},e._l(e.specOptions,function(e){return c("el-option",{key:e.id,attrs:{label:e.content,value:e.content}})})),0===e.product.type&&1==e.selectNum?c("el-select",{attrs:{placeholder:"请选择规格种类"},on:{change:e.spec2Current},model:{value:e.selectSpec2,callback:function(t){e.selectSpec2=t},expression:"selectSpec2"}},e._l(e.specOptions,function(e){return c("el-option",{key:e.id,attrs:{label:e.content,value:e.content}})})):e._e()],1)]),c("div",{staticClass:"content_serveItem"},[1==e.product.type?c("table",{attrs:{width:"620"}},[e._m(0),e._l(e.obj1,function(t,s){return c("tr",[c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入数量"},model:{value:t.sold,callback:function(s){e.$set(t,"sold",s)},expression:"item.sold"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入数量"},model:{value:t.stock,callback:function(s){e.$set(t,"stock",s)},expression:"item.stock"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入价格"},model:{value:t.price,callback:function(s){e.$set(t,"price",s)},expression:"item.price"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入价格"},model:{value:t.discount,callback:function(s){e.$set(t,"discount",s)},expression:"item.discount"}})],1)])})],2):e._e(),0===e.product.type&&0===e.selectNum?c("table",{attrs:{width:"620"}},[c("tr",[c("td",[c("p",[e._v(e._s(e.selectSpec1))])]),c("td",[e._v("已售数量")]),c("td",[e._v("库存数量")]),c("td",[e._v("市场价格/元")]),c("td",[e._v("活动价格/元")])]),e._l(e.obj2,function(t,o){return c("tr",[c("td",[c("el-input",{attrs:{placeholder:"请输入"},model:{value:t.spec1,callback:function(s){e.$set(t,"spec1",s)},expression:"item.spec1"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入数量"},model:{value:t.sold,callback:function(s){e.$set(t,"sold",s)},expression:"item.sold"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入数量"},model:{value:t.stock,callback:function(s){e.$set(t,"stock",s)},expression:"item.stock"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入价格"},model:{value:t.price,callback:function(s){e.$set(t,"price",s)},expression:"item.price"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入价格"},model:{value:t.discount,callback:function(s){e.$set(t,"discount",s)},expression:"item.discount"}}),c("img",{staticClass:"removeObj",attrs:{src:s("de97"),title:"移除该规格产品"},on:{click:function(t){e.removeObj2(o)}}})],1)])}),c("el-button",{staticClass:"addObj",on:{click:e.addObj2}},[e._v("\n          ＋\n        ")])],2):e._e(),0===e.product.type&&1===e.selectNum?c("table",{attrs:{width:"620"}},[c("tr",[c("td",[c("p",[e._v(e._s(e.selectSpec1))])]),c("td",[c("p",[e._v(e._s(e.selectSpec2))])]),c("td",[e._v("已售数量")]),c("td",[e._v("库存数量")]),c("td",[e._v("市场价格")]),c("td",[e._v("活动价格")])]),e._l(e.obj3,function(t,o){return c("tr",[c("td",[c("el-input",{attrs:{placeholder:"请输入"},model:{value:t.spec1,callback:function(s){e.$set(t,"spec1",s)},expression:"item.spec1"}})],1),c("td",[c("el-input",{attrs:{placeholder:"请输入"},model:{value:t.spec2,callback:function(s){e.$set(t,"spec2",s)},expression:"item.spec2"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入数量"},model:{value:t.sold,callback:function(s){e.$set(t,"sold",s)},expression:"item.sold"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入数量"},model:{value:t.stock,callback:function(s){e.$set(t,"stock",s)},expression:"item.stock"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入价格"},model:{value:t.price,callback:function(s){e.$set(t,"price",s)},expression:"item.price"}})],1),c("td",[c("el-input",{attrs:{type:"number",placeholder:"输入价格"},model:{value:t.discount,callback:function(s){e.$set(t,"discount",s)},expression:"item.discount"}}),c("img",{staticClass:"removeObj",attrs:{src:s("de97"),title:"移除该规格产品"},on:{click:function(t){e.removeObj3(o)}}})],1)])}),c("el-button",{staticClass:"addObj",on:{click:e.addObj3}},[e._v("\n          ＋\n        ")])],2):e._e()]),c("div",{staticClass:"uploadImg"},[c("p",[e._v("\n        产品图片:\n      ")]),c("el-upload",{staticClass:"uploadBox",attrs:{action:e.url,"list-type":"picture-card",data:e.uploadData,limit:1,"before-upload":e.beforeAvatarUpload,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccess,"on-error":e.uploadShopPhotoErr,"on-exceed":e.shopPhotoMax}},[c("i",{staticClass:"el-icon-plus"})]),c("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[c("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._m(1),c("div",{staticClass:"name"},[c("el-button",{staticClass:"submitProBtn",attrs:{type:"primary"},on:{click:e.submitPro}},[e._v("\n        上传\n      ")])],1)])],1)},o=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("tr",[s("td",[e._v("已售数量")]),s("td",[e._v("库存数量")]),s("td",[e._v("市场价格/元")]),s("td",[e._v("活动价格/元")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"text"},[s("p",[e._v("\n        产品描述:\n      ")]),s("div",{attrs:{id:"fuwenben"}})])}],a=s("18f8"),n=s("e443"),l={components:{currentPage:a["a"]},data:function(){return{uploadData:{},url:this.baseUrl+"Goods/images",product:{name:"",type:"",img:"",desc:""},typeOptions:[{value:1,label:"服务项"},{value:0,label:"实物产品"}],selectNum:"",specNumOptions:[{value:0,label:"一种规格"},{value:1,label:"两种规格"}],specOptions:[],selectSpec1:"",selectSpec2:"",obj1:[{spec1:"",spec2:"",sold:"",stock:"",price:"",discount:""}],obj2:[{spec1:"",spec2:"",sold:"",stock:"",price:"",discount:""}],obj3:[{spec1:"",spec2:"",sold:"",stock:"",price:"",discount:""}],dialogImageUrl:"",dialogVisible:!1,editorContent:"",token:sessionStorage.getItem("token")}},methods:{submitPro:function(){var e,t,s,c,o=this;if(e=this.product,1==this.product.type)c=this.obj1,t="",s=[];else if(0===this.product.type)if(0===this.selectNum)switch(c=this.obj2,t=1,this.selectSpec1){case"尺寸":s=[1];break;case"颜色":s=[2];break;case"升数":s=[3];break;case"厚度":s=[4];break}else if(1==this.selectNum){var a,l;switch(c=this.obj3,t=2,this.selectSpec1){case"尺寸":a=1;break;case"颜色":a=2;break;case"升数":a=3;break;case"厚度":a=4;break}switch(this.selectSpec2){case"尺寸":l=1;break;case"颜色":l=2;break;case"升数":l=3;break;case"厚度":l=4;break}s=[a,l]}Object(n["b"])("Goods/addGoods",{product:e,specNum:t,specId:s,proDet:c,ifsigning:1}).then(function(e){1==e.data.code?(o.$message({message:e.data.msg,type:"success"}),o.$router.push("/generalize/control")):o.$message({message:e.data.msg,type:"warning"})})},spec1Current:function(e){var t=this,s=this;Object(n["b"])("Goods/standard").then(function(e){if(t.specOptions=e.data.data,""!==s.selectSpec1)for(var c=0;c<t.specOptions.length;c++)s.selectSpec1==t.specOptions[c].content&&t.specOptions.splice(c,1)})},spec2Current:function(e){var t=this,s=this;Object(n["b"])("Goods/standard").then(function(e){if(t.specOptions=e.data.data,""!==s.selectSpec2)for(var c=0;c<t.specOptions.length;c++)s.selectSpec2==t.specOptions[c].content&&t.specOptions.splice(c,1)})},handleRemove:function(e,t){this.product.img=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},beforeAvatarUpload:function(e){this.uploadData.token=this.token;var t="image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传图片格式应为 jpeg/png/jpg!"),s||this.$message.error("上传图片大小不能超过 2MB!"),t&&s},handleAvatarSuccess:function(e,t){this.product.img=e},uploadShopPhotoErr:function(e){this.$message.error("上传失败")},shopPhotoMax:function(){this.$message({message:"最多可上传1张照片！",type:"warning"})},addObj2:function(){this.obj2.push({spec1:"",spec2:"",sold:"",stock:"",price:"",discount:""})},addObj3:function(){this.obj3.push({spec1:"",spec2:"",sold:"",stock:"",price:"",discount:""})},removeObj2:function(e){var t=this;this.$alert("确定要删除该规格产品吗",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,callback:function(s){"confirm"==s?t.obj2.splice(e,1):"cancel"==s&&t.$message({type:"info",message:"action: ".concat(s)})}})},removeObj3:function(e){var t=this;this.$alert("确定要删除该规格产品吗",{confirmButtonText:"确定",cancelButtonText:"取消",showCancelButton:!0,callback:function(s){"confirm"==s&&t.obj3.splice(e,1)}})}},watch:{selectNum:function(){var e=this,t=this;this.selectSpec2="",Object(n["b"])("Goods/standard").then(function(s){if(t.specOptions=s.data.data,1===t.selectNum&&""!==t.selectSpec1)for(var c=0;c<e.specOptions.length;c++)t.selectSpec1==e.specOptions[c].content&&e.specOptions.splice(c,1)})}},mounted:function(){var e=this,t=this,c=s("1a0b"),o=new c("#fuwenben");o.customConfig.menus=["foreColor","backColor","head","bold","italic","underline","justify","quote","emoticon","image"],o.customConfig.onchange=function(t){e.product.desc=t},o.customConfig.uploadImgParams={token:t.token},o.customConfig.uploadImgServer=this.baseUrl+"Goods/images",o.customConfig.uploadFileName="file",o.customConfig.uploadImgMaxSize=2097152,o.customConfig.uploadImgMaxLength=5,o.customConfig.uploadImgHooks={customInsert:function(e,t,s){e(t)}},o.create()}},i=l,r=(s("bb0a"),s("8b4e"),s("2877")),p=Object(r["a"])(i,c,o,!1,null,"8965e900",null);p.options.__file="upload.vue";t["default"]=p.exports},"8b4e":function(e,t,s){"use strict";var c=s("020f"),o=s.n(c);o.a},bb0a:function(e,t,s){"use strict";var c=s("eeb4"),o=s.n(c);o.a},eeb4:function(e,t,s){}}]);
//# sourceMappingURL=chunk-cfefd060.e7364f9a.js.map